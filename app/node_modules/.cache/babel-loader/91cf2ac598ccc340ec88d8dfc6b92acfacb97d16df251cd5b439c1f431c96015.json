{"ast":null,"code":"import _toConsumableArray from\"/Users/zoe/Desktop/Independent/currency/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/zoe/Desktop/Independent/currency/app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zoe/Desktop/Independent/currency/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/zoe/Desktop/Independent/currency/app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faRotate,faCoins}from\"@fortawesome/free-solid-svg-icons\";import CustomSelect from'./CustomSelect';import\"./converter.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Converter=function Converter(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),currencies=_useState2[0],setCurrencies=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),rates=_useState4[0],setRates=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),enteredNumber=_useState6[0],setEnteredNumber=_useState6[1];var _useState7=useState([{currency:null,value:null},{currency:null,value:null},{currency:null,value:null},{currency:null,value:null},{currency:null,value:null},{currency:null,value:null}]),_useState8=_slicedToArray(_useState7,2),customSelects=_useState8[0],setCustomSelects=_useState8[1];var _useState9=useState(Array(6).fill(null)),_useState10=_slicedToArray(_useState9,2),convertedValues=_useState10[0],setConvertedValues=_useState10[1];useEffect(function(){var fetchCurrencies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://zoelindev.com/Real-time-Currency/api/currency_code.php\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setCurrencies(data.currency_codes);setRates(data.rate);//console.log(rates);\ncase 8:case\"end\":return _context.stop();}},_callee);}));return function fetchCurrencies(){return _ref.apply(this,arguments);};}();fetchCurrencies();},[]);var handleEnteredNumberChange=function handleEnteredNumberChange(number,index){var newCustomSelects=_toConsumableArray(customSelects);newCustomSelects[index].value=number;setCustomSelects(newCustomSelects);console.log(newCustomSelects);// 如果沒有選擇幣值，則跳過更新轉換值的操作\nif(!newCustomSelects[index].currency){return;}// Calculate the converted values and update the state\nvar newConvertedValues=calculateConvertedValue(index);setConvertedValues(newConvertedValues);// Update enteredValue for other CustomSelect components\nnewCustomSelects.forEach(function(select,i){if(i!==index){select.value=newConvertedValues[i];}});setCustomSelects(newCustomSelects);};var calculateConvertedValue=function calculateConvertedValue(index){var _rates;// if (!customSelects[index].currency || !customSelects[index].value) {\n//   return null;\n// }\nif(!customSelects[index].currency){return null;}var fromCurrency=customSelects[index].currency;var fromValue=customSelects[index].value;var fromRate=(_rates=rates[\"USD\".concat(fromCurrency)])===null||_rates===void 0?void 0:_rates.Exrate;console.log(fromCurrency,fromValue,fromRate);var usdValue=fromValue/fromRate;console.log(\"usdValue: \"+usdValue);return customSelects.map(function(select,i){var _rates2;if(i===index||!select.currency){return null;}var toRate=(_rates2=rates[\"USD\".concat(select.currency)])===null||_rates2===void 0?void 0:_rates2.Exrate;console.log(\"toRate: \"+toRate);var answer=(usdValue*toRate).toFixed(2);console.log(\"answer: \"+answer);return answer;});};var handleCurrencyChange=function handleCurrencyChange(currency,index){var newCustomSelects=_toConsumableArray(customSelects);newCustomSelects[index].currency=currency;setCustomSelects(newCustomSelects);// 如果輸入值為 null，則跳過更新轉換值的操作\nif(newCustomSelects[index].value===null){return;}// Calculate the converted values and update the state\nvar newConvertedValues=calculateConvertedValue(index);setConvertedValues(newConvertedValues);// Update enteredValue for other CustomSelect components\nnewCustomSelects.forEach(function(select,i){if(i!==index){select.value=newConvertedValues[i];}});setCustomSelects(newCustomSelects);};return/*#__PURE__*/_jsxs(\"div\",{className:\"ConverterBox\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"titleBox\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faRotate}),\" Converter\"]}),/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/average\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faCoins}),\" Average\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"changeBox\",children:customSelects.map(function(select,index){return/*#__PURE__*/_jsx(CustomSelect,{options:currencies,selectedCurrency:select.currency,enteredValue:select.value,convertedValues:convertedValues,onNumberChange:function onNumberChange(number){return handleEnteredNumberChange(number,index);},onCurrencyChange:function onCurrencyChange(currency){return handleCurrencyChange(currency,index);},index:index},index);})})]});};export default Converter;","map":{"version":3,"names":["useState","useEffect","Link","FontAwesomeIcon","faRotate","faCoins","CustomSelect","jsx","_jsx","jsxs","_jsxs","Converter","_useState","_useState2","_slicedToArray","currencies","setCurrencies","_useState3","_useState4","rates","setRates","_useState5","_useState6","enteredNumber","setEnteredNumber","_useState7","currency","value","_useState8","customSelects","setCustomSelects","_useState9","Array","fill","_useState10","convertedValues","setConvertedValues","fetchCurrencies","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","currency_codes","rate","stop","apply","arguments","handleEnteredNumberChange","number","index","newCustomSelects","_toConsumableArray","console","log","newConvertedValues","calculateConvertedValue","forEach","select","i","_rates","fromCurrency","fromValue","fromRate","concat","Exrate","usdValue","map","_rates2","toRate","answer","toFixed","handleCurrencyChange","className","children","icon","to","options","selectedCurrency","enteredValue","onNumberChange","onCurrencyChange"],"sources":["/Users/zoe/Desktop/Independent/currency/app/src/components/Converter.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faRotate, faCoins } from \"@fortawesome/free-solid-svg-icons\";\nimport CustomSelect from './CustomSelect';\nimport \"./converter.css\";\n\nconst Converter = () => {\n    const [currencies, setCurrencies] = useState([]);\n    const [rates, setRates] = useState([]);\n    const [enteredNumber, setEnteredNumber] = useState(null);\n    const [customSelects, setCustomSelects] = useState([\n        { currency: null, value: null },\n        { currency: null, value: null },\n        { currency: null, value: null },\n        { currency: null, value: null },\n        { currency: null, value: null },\n        { currency: null, value: null },\n    ]);\n    const [convertedValues, setConvertedValues] = useState(Array(6).fill(null));\n\n    useEffect(() => {\n        const fetchCurrencies = async () => {\n            const response = await fetch(\n                \"https://zoelindev.com/Real-time-Currency/api/currency_code.php\"\n            );\n            const data = await response.json();\n            setCurrencies(data.currency_codes);\n            setRates(data.rate);\n            //console.log(rates);\n        };\n\n        fetchCurrencies();\n    }, []);\n\n    const handleEnteredNumberChange = (number, index) => {\n        const newCustomSelects = [...customSelects];\n        newCustomSelects[index].value = number;\n        setCustomSelects(newCustomSelects);\n        console.log(newCustomSelects);\n        \n        // 如果沒有選擇幣值，則跳過更新轉換值的操作\n        if (!newCustomSelects[index].currency) {\n            return;\n        }\n    \n        // Calculate the converted values and update the state\n        const newConvertedValues = calculateConvertedValue(index);\n        setConvertedValues(newConvertedValues);\n    \n        // Update enteredValue for other CustomSelect components\n        newCustomSelects.forEach((select, i) => {\n            if (i !== index) {\n                select.value = newConvertedValues[i];\n            }\n        });\n    \n        setCustomSelects(newCustomSelects);\n    };\n    \n      \n\n    const calculateConvertedValue = (index) => {\n        // if (!customSelects[index].currency || !customSelects[index].value) {\n        //   return null;\n        // }\n\n        if (!customSelects[index].currency) {\n            return null;\n        }\n\n        const fromCurrency = customSelects[index].currency;\n        const fromValue = customSelects[index].value;\n        const fromRate = rates[`USD${fromCurrency}`]?.Exrate;\n        \n        console.log(fromCurrency, fromValue, fromRate);\n      \n        const usdValue = fromValue / fromRate;\n        console.log(\"usdValue: \"+ usdValue);\n\n        return customSelects.map((select, i) => {\n            if (i === index || !select.currency) {\n                return null;\n            }\n            const toRate = rates[`USD${select.currency}`]?.Exrate;\n            console.log(\"toRate: \"+toRate);\n\n            const answer = (usdValue * toRate).toFixed(2);\n            console.log(\"answer: \"+ answer);\n            return answer;\n        });\n      \n      };\n      \n\n      const handleCurrencyChange = (currency, index) => {\n        const newCustomSelects = [...customSelects];\n        newCustomSelects[index].currency = currency;\n        setCustomSelects(newCustomSelects);\n    \n        // 如果輸入值為 null，則跳過更新轉換值的操作\n        if (newCustomSelects[index].value === null) {\n            return;\n        }\n    \n        // Calculate the converted values and update the state\n        const newConvertedValues = calculateConvertedValue(index);\n        setConvertedValues(newConvertedValues);\n    \n        // Update enteredValue for other CustomSelect components\n        newCustomSelects.forEach((select, i) => {\n            if (i !== index) {\n                select.value = newConvertedValues[i];\n            }\n        });\n    \n        setCustomSelects(newCustomSelects);\n    };\n\n    return (\n        <div className=\"ConverterBox\">\n            <div className=\"titleBox\">\n                <h2>\n                    <FontAwesomeIcon icon={faRotate} /> Converter\n                </h2>\n                <h2>\n                    <Link to=\"/average\">\n                        <FontAwesomeIcon icon={faCoins} /> Average\n                    </Link>\n                </h2>\n                \n            </div>\n\n            <div className=\"changeBox\">\n                {customSelects.map((select, index) => (\n                    <CustomSelect\n                        key={index}\n                        options={currencies}\n                        selectedCurrency={select.currency}\n                        enteredValue={select.value}\n                        convertedValues={convertedValues} \n                        onNumberChange={(number) => handleEnteredNumberChange(number, index)}\n                        onCurrencyChange={(currency) => handleCurrencyChange(currency, index)}\n                        index={index}\n                        \n                    />\n                ))}\n            </div>\n        </div>\n    );\n};\n\nexport default Converter;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}